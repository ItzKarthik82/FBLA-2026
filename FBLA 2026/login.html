<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PeerLearn - Login & Sign Up</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js"></script>
    <style>
        .login-page {
            min-height: calc(100vh - 60px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            background: var(--bg);
        }

        .auth-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            max-width: 1000px;
            width: 100%;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            background: var(--white);
        }

        body.dark .auth-container {
            background: var(--card-bg);
        }

        .auth-left {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 60px 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            color: white;
        }

        .auth-left h1 {
            font-size: 40px;
            font-weight: 800;
            margin-bottom: 20px;
        }

        .auth-left p {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 32px;
            opacity: 0.95;
        }

        .features-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .features-list li {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            font-weight: 500;
        }

        .features-list li::before {
            content: 'âœ“';
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: rgba(255, 255, 255, 0.25);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .auth-right {
            padding: 60px 50px;
            background: var(--white);
        }

        body.dark .auth-right {
            background: var(--card-bg);
        }

        .auth-header h2 {
            font-size: 28px;
            font-weight: 700;
            margin: 0 0 8px 0;
            color: var(--gray-900);
        }

        body.dark .auth-header h2 {
            color: var(--text);
        }

        .auth-header p {
            color: var(--gray-500);
            font-size: 14px;
            margin: 0 0 30px 0;
        }

        body.dark .auth-header p {
            color: var(--text-muted);
        }

        .tabs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab-button {
            padding: 12px;
            background: var(--white);
            border: 2px solid var(--gray-200);
            border-radius: var(--border-radius);
            font-weight: 600;
            color: var(--gray-600);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        body.dark .tab-button {
            background: var(--bg);
            border-color: var(--border);
            color: var(--text-muted);
        }

        .tab-button:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .tab-button.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .form-container {
            display: none;
            min-height: 480px;
        }

        .form-container.active {
            display: block;
        }

        .form-input-group {
            margin-bottom: 20px;
        }

        .form-input-group label {
            display: block;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 8px;
            font-size: 14px;
        }

        body.dark .form-input-group label {
            color: var(--text);
        }

        .form-input-group input,
        .form-input-group select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid var(--gray-200);
            border-radius: var(--border-radius);
            font-size: 14px;
            background: var(--white);
            color: var(--gray-900);
            transition: all 0.2s ease;
            font-family: inherit;
        }

        body.dark .form-input-group input,
        body.dark .form-input-group select {
            background: var(--bg);
            border-color: var(--border);
            color: var(--text);
        }

        .form-input-group input:focus,
        .form-input-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .error-text {
            color: var(--danger);
            font-size: 12px;
            margin-top: 6px;
            display: none;
        }

        .submit-button {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 20px;
        }

        .submit-button:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }

        .form-link {
            text-align: center;
            font-size: 13px;
            color: var(--gray-600);
            margin-top: 16px;
        }

        body.dark .form-link {
            color: var(--text-muted);
        }

        .form-link a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .form-link a:hover {
            text-decoration: underline;
        }

        .requirement-msg {
            color: var(--secondary);
            font-size: 12px;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
        }

        .requirement-msg::before {
            content: 'âœ“';
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 14px;
            height: 14px;
            background: var(--secondary);
            border-radius: 50%;
            color: white;
            font-size: 9px;
            font-weight: bold;
        }

        .requirements-list {
            margin-top: 10px;
            padding: 12px;
            background: var(--gray-50);
            border-radius: var(--border-radius);
            border: 1px solid var(--gray-200);
            display: none;
        }

        body.dark .requirements-list {
            background: var(--bg);
            border-color: var(--border);
        }

        .requirements-list.show {
            display: block;
        }

        .req-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            margin-bottom: 6px;
            color: var(--gray-600);
        }

        body.dark .req-item {
            color: var(--text-muted);
        }

        .req-item:last-child {
            margin-bottom: 0;
        }

        .req-check {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid var(--gray-300);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 9px;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        body.dark .req-check {
            border-color: var(--border);
        }

        .req-check.met {
            background: var(--secondary);
            border-color: var(--secondary);
            color: white;
        }

        .notification-popup {
            position: fixed;
            padding: 14px 20px;
            border-radius: var(--border-radius);
            color: white;
            font-weight: 500;
            z-index: 1000;
            font-size: 14px;
            animation: popIn 0.3s ease;
        }

        .notification-popup.success {
            background: var(--secondary);
            bottom: 24px;
            left: 24px;
        }

        .notification-popup.error {
            background: var(--danger);
            top: 24px;
            right: 24px;
        }

        @keyframes popIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 900px) {
            .auth-container {
                grid-template-columns: 1fr;
            }
            .auth-left {
                display: none;
            }
            .auth-right {
                padding: 40px 30px;
            }
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <h1 class="brand">PeerLearn</h1>
            <p class="tag">Academic Learning Hub</p>
            <nav>
                <ul class="nav">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="schedule.html">Schedule</a></li>
                    <li><a href="resources.html">Resources</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <button id="themeToggle" class="btn outline">ðŸŒ™ Dark</button>
            </div>
        </div>
    </header>

    <main class="content">
        <div class="login-page">
            <div class="auth-container">
                <div class="auth-left">
                    <h1>PeerLearn</h1>
                    <p>Join thousands of students achieving their academic goals through collaborative learning and expert guidance.</p>
                    <ul class="features-list">
                        <li>Track your study progress</li>
                        <li>Access learning materials</li>
                        <li>Manage your schedule</li>
                        <li>Connect with peers</li>
                    </ul>
                </div>

                <div class="auth-right">
                    <div class="auth-header">
                        <h2>Welcome</h2>
                        <p>Sign in to your account</p>
                    </div>

                    <div class="tabs">
                        <button class="tab-button active" data-form="login">Login</button>
                        <button class="tab-button" data-form="signup">Sign Up</button>
                    </div>

                    <!-- LOGIN FORM -->
                    <form id="login" class="form-container active">
                        <div class="form-input-group">
                            <label>Email Address</label>
                            <input type="email" id="loginEmail" placeholder="you@example.com">
                            <div class="error-text" id="loginEmailErr"></div>
                            <div class="requirements-list" id="loginEmailReqs">
                                <div class="req-item">
                                    <div class="req-check" id="loginEmailCheck"></div>
                                    <span>Valid email format</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-input-group">
                            <label>Password</label>
                            <input type="password" id="loginPass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                            <div class="error-text" id="loginPassErr"></div>
                            <div class="requirements-list" id="loginPassReqs">
                                <div class="req-item">
                                    <div class="req-check" id="loginPassCheck"></div>
                                    <span>Password entered</span>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="submit-button">Sign In</button>
                        <div class="form-link">
                            <a href="#">Forgot password?</a>
                        </div>
                    </form>

                    <!-- SIGNUP FORM -->
                    <form id="signup" class="form-container">
                        <div class="form-input-group">
                            <label>Full Name</label>
                            <input type="text" id="regName" placeholder="John Doe">
                            <div class="error-text" id="regNameErr"></div>
                            <div class="requirements-list" id="regNameReqs">
                                <div class="req-item">
                                    <div class="req-check" id="regNameCheck"></div>
                                    <span>Full name entered</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-input-group">
                            <label>Email Address</label>
                            <input type="email" id="regEmail" placeholder="you@example.com">
                            <div class="error-text" id="regEmailErr"></div>
                            <div class="requirements-list" id="regEmailReqs">
                                <div class="req-item">
                                    <div class="req-check" id="regEmailCheck"></div>
                                    <span>Valid email format</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-input-group">
                            <label>Password</label>
                            <input type="password" id="regPass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                            <div class="error-text" id="regPassErr"></div>
                            <div class="requirements-list" id="regPassReqs">
                                <div class="req-item">
                                    <div class="req-check" id="regPassCheck"></div>
                                    <span>At least 6 characters</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-input-group">
                            <label>Confirm Password</label>
                            <input type="password" id="regPassConfirm" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                            <div class="error-text" id="regPassConfirmErr"></div>
                            <div class="requirements-list" id="regPassConfirmReqs">
                                <div class="req-item">
                                    <div class="req-check" id="regPassConfirmCheck"></div>
                                    <span>Passwords match</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-input-group">
                            <label>Security Question</label>
                            <select id="regQuestion">
                                <option value="">Choose a question...</option>
                                <option value="pet">What was your first pet's name?</option>
                                <option value="city">What city were you born in?</option>
                                <option value="school">What was your elementary school?</option>
                                <option value="teacher">Favorite teacher's name?</option>
                                <option value="color">What is your favorite color?</option>
                            </select>
                            <div class="error-text" id="regQuestionErr"></div>
                            <div class="requirements-list" id="regQuestionReqs">
                                <div class="req-item">
                                    <div class="req-check" id="regQuestionCheck"></div>
                                    <span>Question selected</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-input-group">
                            <label>Your Answer</label>
                            <input type="text" id="regAnswer" placeholder="Your answer">
                            <div class="error-text" id="regAnswerErr"></div>
                            <div class="requirements-list" id="regAnswerReqs">
                                <div class="req-item">
                                    <div class="req-check" id="regAnswerCheck"></div>
                                    <span>Answer provided</span>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="submit-button">Create Account</button>
                        <div class="form-link">
                            By signing up, you agree to our <a href="#">Terms of Service</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>PeerLearn</h4>
                    <p>Student-built, student-powered learning platform.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="schedule.html">Schedule</a></li>
                        <li><a href="resources.html">Resources</a></li>
                        <li><a href="dashboard.html">Dashboard</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect</h4>
                    <p>Built for FBLA 2026</p>
                    <p>Created by students, for students</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 PeerLearn. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Redirect if already logged in
        if (typeof checkAuth !== 'undefined' && checkAuth()) {
            window.location.href = 'dashboard.html';
        }

        // Notification helper
        function showNotif(msg, type) {
            const notif = document.createElement('div');
            notif.className = `notification-popup ${type}`;
            notif.textContent = msg;
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), 3500);
        }

        // Email regex
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        // Clear errors on input
        document.querySelectorAll('input, select').forEach(field => {
            field.addEventListener('input', () => {
                const errorId = field.id + 'Err';
                const errorEl = document.getElementById(errorId);
                if (errorEl) {
                    errorEl.style.display = 'none';
                }
            });
        });

        // Update login requirements
        function updateLoginReqs() {
            const email = document.getElementById('loginEmail').value.trim();
            const pass = document.getElementById('loginPass').value;

            const emailValid = isValidEmail(email);
            const passValid = pass.length > 0;

            updateReqDisplay('loginEmailReqs', 'loginEmailCheck', emailValid, email.length > 0);
            updateReqDisplay('loginPassReqs', 'loginPassCheck', passValid, pass.length > 0);
        }

        // Update signup requirements
        function updateSignupReqs() {
            const name = document.getElementById('regName').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const pass = document.getElementById('regPass').value;
            const confirm = document.getElementById('regPassConfirm').value;
            const question = document.getElementById('regQuestion').value;
            const answer = document.getElementById('regAnswer').value.trim();

            const nameValid = name.length > 0;
            const emailValid = isValidEmail(email);
            const passValid = pass.length >= 6;
            const matchValid = pass === confirm && pass.length > 0;
            const questionValid = question.length > 0;
            const answerValid = answer.length > 0;

            updateReqDisplay('regNameReqs', 'regNameCheck', nameValid, name.length > 0);
            updateReqDisplay('regEmailReqs', 'regEmailCheck', emailValid, email.length > 0);
            updateReqDisplay('regPassReqs', 'regPassCheck', passValid, pass.length > 0);
            updateReqDisplay('regPassConfirmReqs', 'regPassConfirmCheck', matchValid, pass.length > 0);
            updateReqDisplay('regQuestionReqs', 'regQuestionCheck', questionValid, question.length > 0);
            updateReqDisplay('regAnswerReqs', 'regAnswerCheck', answerValid, answer.length > 0);
        }

        // Helper to update requirement display
        function updateReqDisplay(containerId, checkId, isMet, show) {
            const container = document.getElementById(containerId);
            const check = document.getElementById(checkId);
            
            if (show) {
                container.classList.add('show');
                if (isMet) {
                    check.classList.add('met');
                    check.textContent = 'âœ“';
                } else {
                    check.classList.remove('met');
                    check.textContent = '';
                }
            } else {
                container.classList.remove('show');
            }
        }

        // Login input listeners
        document.getElementById('loginEmail').addEventListener('input', updateLoginReqs);
        document.getElementById('loginPass').addEventListener('input', updateLoginReqs);

        // Signup input listeners
        document.getElementById('regName').addEventListener('input', updateSignupReqs);
        document.getElementById('regEmail').addEventListener('input', updateSignupReqs);
        document.getElementById('regPass').addEventListener('input', updateSignupReqs);
        document.getElementById('regPassConfirm').addEventListener('input', updateSignupReqs);
        document.getElementById('regQuestion').addEventListener('change', updateSignupReqs);
        document.getElementById('regAnswer').addEventListener('input', updateSignupReqs);

        // Tab switching
        document.querySelectorAll('.tab-button').forEach(btn => {
            btn.addEventListener('click', () => {
                const formId = btn.getAttribute('data-form');
                
                document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.form-container').forEach(f => f.classList.remove('active'));
                
                btn.classList.add('active');
                document.getElementById(formId).classList.add('active');
                
                // Clear all errors
                document.querySelectorAll('.error-text').forEach(e => e.style.display = 'none');
            });
        });

        // LOGIN FORM
        document.getElementById('login').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value.trim();
            const pass = document.getElementById('loginPass').value;
            
            const emailErr = document.getElementById('loginEmailErr');
            const passErr = document.getElementById('loginPassErr');
            
            emailErr.style.display = 'none';
            passErr.style.display = 'none';
            
            let valid = true;
            
            if (!email) {
                emailErr.textContent = 'Email is required';
                emailErr.style.display = 'block';
                valid = false;
            } else if (!isValidEmail(email)) {
                emailErr.textContent = 'Invalid email format';
                emailErr.style.display = 'block';
                valid = false;
            }
            
            if (!pass) {
                passErr.textContent = 'Password is required';
                passErr.style.display = 'block';
                valid = false;
            }
            
            if (!valid) return;
            
            const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
            const user = users.find(u => u.email.toLowerCase() === email.toLowerCase() && u.password === pass);
            
            if (user) {
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userName', user.name);
                localStorage.setItem('userEmail', user.email);
                showNotif('Login successful!', 'success');
                setTimeout(() => window.location.href = 'dashboard.html', 1500);
            } else {
                showNotif('Invalid email or password', 'error');
            }
        });

        // SIGNUP FORM
        document.getElementById('signup').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const name = document.getElementById('regName').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const pass = document.getElementById('regPass').value;
            const passConfirm = document.getElementById('regPassConfirm').value;
            const question = document.getElementById('regQuestion').value;
            const answer = document.getElementById('regAnswer').value.trim();
            
            // Clear errors
            document.querySelectorAll('.error-text').forEach(e => e.style.display = 'none');
            
            let valid = true;
            
            if (!name) {
                document.getElementById('regNameErr').textContent = 'Name is required';
                document.getElementById('regNameErr').style.display = 'block';
                valid = false;
            }
            
            if (!email) {
                document.getElementById('regEmailErr').textContent = 'Email is required';
                document.getElementById('regEmailErr').style.display = 'block';
                valid = false;
            } else if (!isValidEmail(email)) {
                document.getElementById('regEmailErr').textContent = 'Invalid email format';
                document.getElementById('regEmailErr').style.display = 'block';
                valid = false;
            }
            
            if (!pass) {
                document.getElementById('regPassErr').textContent = 'Password is required';
                document.getElementById('regPassErr').style.display = 'block';
                valid = false;
            } else if (pass.length < 6) {
                document.getElementById('regPassErr').textContent = 'Password must be 6+ characters';
                document.getElementById('regPassErr').style.display = 'block';
                valid = false;
            }
            
            if (!passConfirm) {
                document.getElementById('regPassConfirmErr').textContent = 'Confirm your password';
                document.getElementById('regPassConfirmErr').style.display = 'block';
                valid = false;
            } else if (pass !== passConfirm) {
                document.getElementById('regPassConfirmErr').textContent = 'Passwords do not match';
                document.getElementById('regPassConfirmErr').style.display = 'block';
                valid = false;
            }
            
            if (!question) {
                document.getElementById('regQuestionErr').textContent = 'Select a question';
                document.getElementById('regQuestionErr').style.display = 'block';
                valid = false;
            }
            
            if (!answer) {
                document.getElementById('regAnswerErr').textContent = 'Answer is required';
                document.getElementById('regAnswerErr').style.display = 'block';
                valid = false;
            }
            
            if (!valid) return;
            
            // Check if email exists
            const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
            if (users.some(u => u.email.toLowerCase() === email.toLowerCase())) {
                document.getElementById('regEmailErr').textContent = 'Email already registered';
                document.getElementById('regEmailErr').style.display = 'block';
                return;
            }
            
            // Register
            users.push({
                name,
                email,
                password: pass,
                securityQuestion: question,
                securityAnswer: answer.toLowerCase()
            });
            localStorage.setItem('registeredUsers', JSON.stringify(users));
            localStorage.setItem('userLoggedIn', 'true');
            localStorage.setItem('userName', name);
            localStorage.setItem('userEmail', email);
            
            showNotif('Account created! Logging in...', 'success');
            setTimeout(() => window.location.href = 'dashboard.html', 1500);
        });
    </script>
</body>
</html>
